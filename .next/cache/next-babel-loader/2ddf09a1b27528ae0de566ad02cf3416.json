{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport styles from '../styles/login.module.scss';\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport backgroundlogin from '../assets/backgrounds/background_banner.png';\nimport BtnPrimary from '../components/main/btnPrimary';\nimport Layout from '../components/main/layout';\nimport Cookies from 'js-cookie';\nimport { useForm } from 'react-hook-form';\nimport { useState } from 'react';\nimport Router from 'next/router';\nexport var __N_SSP = true;\nexport default function Login() {\n  var _useState = useState(false),\n      validation = _useState[0],\n      setValidation = _useState[1];\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      handleSubmit = _useForm.handleSubmit,\n      errors = _useForm.errors;\n\n  var onSubmit = function onSubmit(data) {\n    var myHeaders = new Headers();\n    myHeaders.append(\"Content-Type\", \"application/json\");\n    var requestOptions = {\n      method: 'POST',\n      headers: myHeaders,\n      body: JSON.stringify({\n        \"username\": data.username,\n        \"password\": data.password\n      })\n    };\n    fetch(\"https://www.trainingapi.tk/auth/jwt/create\", requestOptions).then(function (response) {\n      return response.json();\n    }).then(function (result) {\n      if (result.access) {\n        Cookies.set('token', result.access);\n        window.location.href = \"/account\";\n      } else {\n        setValidation(true);\n      }\n\n      ;\n    })[\"catch\"](function (error) {\n      return console.log('error', error);\n    });\n  };\n\n  return __jsx(Layout, null, __jsx(Head, null, __jsx(\"script\", {\n    type: \"application/ld+json\",\n    dangerouslySetInnerHTML: {\n      __html: JSON.stringify({\n        \"@context\": \"https://schema.org/\",\n        \"@type\": \"BreadcrumbList\",\n        \"itemListElement\": [{\n          \"@type\": \"ListItem\",\n          \"position\": 1,\n          \"name\": \"Home\",\n          \"item\": \"http://bdf0a72fd508.ngrok.io/\"\n        }, {\n          \"@type\": \"ListItem\",\n          \"position\": 2,\n          \"name\": \"Login\",\n          \"item\": \"http://bdf0a72fd508.ngrok.io/login\"\n        }]\n      })\n    }\n  })), __jsx(\"div\", {\n    className: styles.Login,\n    style: {\n      backgroundImage: 'url(' + backgroundlogin + ')'\n    }\n  }, __jsx(\"div\", {\n    className: styles.Login_inner\n  }, validation ? __jsx(\"h3\", null, \"Wrong Username or Password\") : \"\", __jsx(\"h2\", null, \"Login\"), __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit)\n  }, __jsx(\"div\", {\n    className: styles.Login_username\n  }, __jsx(\"input\", {\n    type: \"text\",\n    name: \"username\",\n    ref: register\n  }), __jsx(\"label\", null, \"Username\")), __jsx(\"div\", {\n    className: styles.Login_password\n  }, __jsx(\"input\", {\n    type: \"password\",\n    name: \"password\",\n    autocomplete: \"on\",\n    ref: register\n  }), __jsx(\"label\", null, \"Password\")), __jsx(BtnPrimary, {\n    type: \"submit\",\n    name: \"login\"\n  })), __jsx(\"p\", null, \"Don't have an accout?\"), __jsx(Link, {\n    href: \"/register\"\n  }, __jsx(\"a\", null, \"Register\")))));\n}","map":null,"metadata":{},"sourceType":"module"}